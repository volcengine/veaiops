---
title: 安装高级选项
description: VeAIOps 的安装方式与部署架构说明
navigation:
  icon: i-lucide-download
---

通过覆盖 helm chart 中的 `values.yaml` 内的参数，您可以自定义 VeAIOps 的安装方式与部署架构。

## Helm Chart 安装高级选项

### 全局参数（Global）

| 名称                                    | 描述                           | 默认值     |
|---------------------------------------|------------------------------|---------|
| `global.imageRegistry`                | 全局镜像仓库前缀，用于覆盖各组件镜像 registry  | `""`    |
| `global.imagePullSecrets`             | 全局镜像拉取 Secret 名称列表（如需私有仓库认证） | `[]`    |
| `global.security.allowInsecureImages` | 是否允许不安全镜像（如不签名镜像）            | `false` |

### Ingress 配置

| 名称                      | 描述                                                | 默认值       |
|-------------------------|---------------------------------------------------|-----------|
| `ingress.className`     | Ingress 控制器类名（目前仅支持 nginx）                        | `"nginx"` |
| `ingress.host`          | Ingress 域名（如 veaiops.example.com）                 | `""`      |
| `ingress.tlsSecretName` | Ingress TLS 证书 Secret 名称（如 veaiops-tls），为空时关闭 TLS | `""`      |

### 应用配置

| 名称                                      | 描述                                                | 默认值                   |
|-----------------------------------------|---------------------------------------------------|-----------------------|
| `salt`                                  | veaiops 用来加密的盐，为空时系统会自动生成                         | `"<自动生成>"`            |
| `env.INIT_ADMIN_USERNAME`               | veaiops 平台的初始化管理员用户名                              | `"admin"`             |
| `env.INIT_ADMIN_EMAIL`                  | veaiops 平台的初始化管理员邮箱                               | `"admin@veaiops.com"` |
| `env.INIT_ADMIN_PASSWORD`               | veaiops 平台的初始化管理员密码                               | `"admin123456"`       |
| `env.WEBHOOK_SECRET`                    | veaiops 平台的 Webhook 密钥                            | `""`                  |
| `env.WEBHOOK_URL`                       | veaiops 平台的 Webhook URL                           | `""`                  |
| `env.WEBHOOK_EVENT_CENTER_EXTERNAL_URL` | veaiops 平台的事件中心外部 URL                             | `""`                  |
| `env.BOT_CHANNEL`                       | veaiops 平台的机器人 channel                            | `"Lark"`              |
| `env.BOT_ID`                            | veaiops 平台的机器人 ID                                 | `""`                  |
| `env.BOT_NAME`                          | veaiops 平台的机器人名称                                  | `""`                  |
| `env.BOT_SECRET`                        | veaiops 平台的机器人密钥                                  | `""`                  |
| `env.BOT_TEMPLATE_ID`                   | veaiops 平台的机器人模板 ID                               | `""`                  |
| `env.LLM_API_BASE`                      | veaiops 平台的 LLM API 基础 URL                        | `""`                  |
| `env.LLM_API_KEY`                       | veaiops 平台的 LLM API 密钥                            | `""`                  |
| `env.LLM_EMBEDDING_NAME`                | veaiops 平台的 LLM 嵌入模型名称                            | `""`                  |
| `env.LLM_NAME`                          | veaiops 平台的 LLM 模型名称                              | `""`                  |
| `env.LOG_FILE`                          | veaiops 各组件的日志文件名                                 | `"veaiops.log"`       |
| `env.LOG_LEVEL`                         | veaiops 各组件的日志级别                                  | `"INFO"`              |
| `env.OTEL_ENABLED`                      | 是否开启 OpenTelemetry 分布式 tracing 功能                 | `"false"`             |
| `env.OTEL_EXPORTER_OTLP_ENDPOINT`       | OpenTelemetry 导出器的 OTLP 端点地址                      | `""`                  |
| `env.OTEL_MAX_EXPORT_BATCH_SIZE`        | OpenTelemetry 导出器的最大导出批次大小                        | `"512"`               |
| `env.OTEL_MAX_QUEUE_SIZE`               | OpenTelemetry 导出器的最大队列大小                          | `"2048"`              |
| `env.OTEL_SCHEDULE_DELAY_MILLIS`        | OpenTelemetry 导出器的调度延迟毫秒数                         | `"5000"`              |
| `env.OTEL_SERVICE_ENVIRONMENT`          | OpenTelemetry 服务环境变量                              | `"production"`        |
| `env.OTEL_SERVICE_NAME`                 | OpenTelemetry 服务名称                                | `"veaiops"`           |
| `env.OTEL_SERVICE_VERSION`              | OpenTelemetry 服务版本                                | `"0.0.1"`             |
| `env.OTEL_TRACE_ID_RATIO`               | OpenTelemetry 采样率（0.0 到 1.0 之间）                   | `"1.0"`               |
| `env.VOLCENGINE_AK`                     | VolcEngine 访问密钥（AK）                               | `""`                  |
| `env.VOLCENGINE_EXTRA_KB_COLLECTIONS`   | VolcEngine 额外的知识库集合                               | `"[]"`                |
| `env.VOLCENGINE_SK`                     | VolcEngine 访问密钥（SK）                               | `""`                  |
| `env.VOLCENGINE_TOS_ENDPOINT`           | VolcEngine TOS 服务端地址（如 tos-cn-beijing.volces.com） | `""`                  |
| `env.VOLCENGINE_TOS_REGION`             | VolcEngine TOS 服务端区域（如 cn-beijing）                | `""`                  |

### MongoDB 参数

生产环境请确保 mongodb.enabled=false，并通过 mongodb.external 系列参数指定外部 mongodb。veaiops 内置的 mongodb
不具备高可用和持久化存储，仅供 poc 使用。

| 名称                          | 描述                             | 默认值              |
|-----------------------------|--------------------------------|------------------|
| `mongodb.enabled`           | 是否使用内置 MongoDB（为 `false` 时走外部） | `true`           |
| `mongodb.external.host`     | 外部 MongoDB 连接地址（可含副本集多地址）      | `""`             |
| `mongodb.external.username` | 外部 MongoDB 用户名                 | `""`             |
| `mongodb.external.password` | 外部 MongoDB 密码                  | `""`             |
| `mongodb.auth.rootPassword` | （内置模式）root 密码                  | `Veaiops_123456` |

### 部署配置

| 名称                                  | 描述                       | 默认值 |
|-------------------------------------|--------------------------|-----|
| `backend.replicaCount`              | backend 副本数              | `1` |
| `chatops.replicaCount`              | chatops 副本数              | `1` |
| `intelligentThreshold.replicaCount` | intelligentThreshold 副本数 | `1` |
| `frontend.replicaCount`             | frontend 副本数             | `1` |
