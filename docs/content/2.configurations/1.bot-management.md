---
title: 机器人管理
description: 配置企业协同IM工具机器人
navigation:
  icon: i-lucide-bot
---

在`系统配置` > `群聊机器人管理`页面统一管理机器人。机器人是 VeAIOps 与飞书等协同IM工具交互的桥梁，支持ChatOps场景功能与告警通知功能。

## 操作指南

::tabs
  ::tab{label="新建机器人"}
    点击页面右上角的 `+ 新建机器人` 按钮，可以开始配置一个新的机器人。

    ### 配置步骤

    ::steps
    ### 填写基础信息
    - **企业协同IM工具**：前往[飞书开放平台](https://open.larkoffice.com/app){:target="_blank" rel="noopener noreferrer"}创建机器人
    - **App ID**：从飞书开发者后台获取
    - **App Secret**：从飞书开发者后台获取

    ### 订阅事件
      ![配置引导](/images/configurations-bot.png)
      完成添加后，在飞书开发者后台`事件配置`配置订阅事件（ChatOps 必需）：
      - `im.chat.disbanded_v1`（解散群）
      - `im.chat.member.bot.added_v1`（机器人进群）
      - `im.chat.member.bot.deleted_v1`（机器人被移出群）
      - `im.message.receive_v1`（接收消息）

      ![订阅事件](/images/configurations-bot-subscribe.png)

    ### 订阅回调：
      完成添加后，在飞书开发者后台`回调配置`订阅回调（ChatOps 必需）：

      - `card.action.trigger`（卡片交互回调）

      ![订阅回调](/images/configurations-bot-callback.png)

    ### 配置权限
      在飞书开发者后台`权限管理`导入以下权限配置：
      ![权限管理](/images/configurations-bot-auth.png)
      ```json
      {
        "scopes": {
          "tenant": [
            "contact:user.email:readonly",
            "contact:user.employee_id:readonly",
            "im:chat.members:bot_access",
            "im:chat:read",
            "im:message.group_at_msg:readonly",
            "im:message.group_msg",
            "im:message.pins:read",
            "im:message:readonly",
            "im:message:send_as_bot",
            "im:message:send_multi_users",
            "im:message:update"
          ],
          "user": ["contact:user.email:readonly"]
        }
      }
      ```
    ### ChatOps扩展配置
      如果您要开启ChatOps相关能力，请打开“配置ChatOps高级功能”进行相关配置，详见 [机器人扩展配置](/chatops/configuration)



  ::
  ::tab{label="编辑机器人"}
    1. 在机器人列表中，找到需要修改的机器人。
    2. 点击其对应的 `编辑` 按钮。
    3. 在弹出的窗口中，您可以修改该机器人的所有配置信息。
    4. 修改完成后，点击 `保存` 按钮。

    ::alert{type="danger"}
    **注意**: 编辑机器人时，需要重新填写相关密钥（包括App Secret、API Key、Access Key 和 Secret Key）

  ::
  ::tab{label="删除机器人"}
    1. 在机器人列表中，找到需要删除的机器人。
    2. 点击其对应的 `删除` 按钮。
    3. 在弹出的确认框中点击 `确认` 以完成删除。

    ::alert{type="danger"}
    **注意**: 删除机器人是不可逆操作，请谨慎处理。
    ::
  ::
::

----

## 群管理

创建机器人后，您可以点击机器人列表操作列中的 `群管理` 按钮，进入特定机器人的群管理页面。在这里，您可以查看该机器人已加入的所有群聊，并对每个群聊的功能进行精细化配置。

- **群聊列表**: 展示了机器人所在的所有群聊，包括群信息、机器人ID、是否已入群等状态。当您将机器人加入新的群聊之后，刷新这里的列表会看到机器人新加入的群。
- **操作**:
    - **配置**: 点击 `配置` 按钮，可以对该群聊的特定功能进行设置。

### 群功能配置

在群管理页面，点击任意群聊后的 `配置` 按钮，会弹出“群功能配置”窗口。

在这里，您可以开启或关闭以下功能：

- **主动回复**: 开启后，Agent 将能够主动在群聊中根据对话内容做出响应。这通常用于实现智能问答、任务处理等需要机器人主动交互的场景。
- **内容识别**: 开启后，Agent 会根据预设的检测规则（正则或语义匹配）监控群聊内容，并在匹配时触发相应动作。这可以用于舆情监控、关键词报警等场景。

::tip
更多请参考 [ChatOps场景概述](/chatops/overview)
::

### 新增关注

在群管理页面，您还可以为机器人添加关注，以便在事件中心订阅关注的项目。点击页面右上角的 `+ 新增关注` 按钮，可以新增关注。

- **类目**: 选择关注的类别，目前仅支持“项目”。
- **内容**: 根据所选类目，选择具体要关注的内容，如果没有您要关注的项目，请移步[项目管理](project-management)导入或新增项目。

完成配置后，点击 `保存` 即可。
