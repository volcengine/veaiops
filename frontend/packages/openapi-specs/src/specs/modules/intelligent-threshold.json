{
  "openapi": "3.0.0",
  "info": {
    "title": "VolcAIOpsKit - Intelligent Threshold API",
    "version": "1.0.0",
    "description": "Intelligent threshold management related APIs"
  },
  "paths": {
    "/apis/v1/intelligent-threshold/task/": {
      "post": {
        "summary": "Create Intelligent Threshold Task",
        "description": "Create a new intelligent threshold task",
        "tags": ["Intelligent Threshold Task"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IntelligentThresholdTaskCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created Successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponseIntelligentThresholdTask"
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List Tasks",
        "description": "Get task list",
        "tags": ["Intelligent Threshold Task"],
        "parameters": [
          {
            "name": "projects",
            "in": "query",
            "required": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "List of project names"
          },
          {
            "name": "task_name",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Task name filter"
          },
          {
            "name": "datasource_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["Zabbix", "Aliyun", "Volcengine"],
              "default": "Volcengine"
            },
            "description": "Data source type"
          },
          {
            "name": "auto_update",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "Auto update switch"
          },
          {
            "name": "created_at_start",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Creation time range start"
          },
          {
            "name": "created_at_end",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Creation time range end"
          },
          {
            "name": "updated_at_start",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Update time range start"
          },
          {
            "name": "updated_at_end",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Update time range end"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "Number of records to skip"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1000,
              "default": 100
            },
            "description": "Page size"
          }
        ],
        "responses": {
          "200": {
            "description": "Get task list successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedAPIResponseIntelligentThresholdTask"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/task/{task_id}": {
      "get": {
        "summary": "Get Intelligent Threshold Task",
        "description": "Get an intelligent threshold task by ID",
        "tags": ["Intelligent Threshold Task"],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponseIntelligentThresholdTaskDetail"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete Task",
        "description": "Delete an intelligent threshold task and all its associated versions",
        "tags": ["Intelligent Threshold Task"],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Task ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Delete task successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/alarm/": {
      "post": {
        "summary": "Create Intelligent Threshold Alarm",
        "description": "Create a new intelligent threshold alarm",
        "tags": ["Intelligent Threshold Alarm"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IntelligentThresholdAlarmCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created Successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponseIntelligentThresholdAlarm"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/task/rerun": {
      "post": {
        "summary": "Rerun Task",
        "description": "Rerun intelligent threshold task",
        "tags": ["Intelligent Threshold Task"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RerunIntelligentThresholdTaskRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task rerun successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponseIntelligentThresholdTaskVersion"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/task/versions/": {
      "get": {
        "summary": "List Task Versions",
        "description": "Get task version list",
        "tags": ["Intelligent Threshold Task"],
        "parameters": [
          {
            "name": "task_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Task ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/IntelligentThresholdTaskStatus"
            },
            "description": "Filter by task status"
          },
          {
            "name": "created_at_start",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Creation time range start"
          },
          {
            "name": "created_at_end",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Creation time range end"
          },
          {
            "name": "updated_at_start",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Update time range start"
          },
          {
            "name": "updated_at_end",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Update time range end"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "Number of items to skip"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1000,
              "default": 100
            },
            "description": "Maximum number of items to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Get version list successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedAPIResponseIntelligentThresholdTaskVersion"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/task/{task_id}/update_result": {
      "post": {
        "summary": "Update Task Result Endpoint",
        "description": "Update task result",
        "tags": ["Intelligent Threshold Task"],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTaskResultRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Update task result successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/alarm/sync": {
      "post": {
        "summary": "Sync Alarm Rules",
        "description": "Sync alarm rules",
        "tags": ["Intelligent Threshold Alarm"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SyncAlarmRulesPayload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Sync alarm rules successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponseSyncAlarmRulesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/apis/v1/intelligent-threshold/task/auto-refresh-switch": {
      "post": {
        "summary": "Auto Refresh Switch",
        "description": "Update auto_update field for a list of intelligent threshold tasks.",
        "tags": ["Intelligent Threshold Task"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAutoRefreshSwitchPayload"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "APIResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "object",
            "description": "Response data, structure depends on the API endpoint"
          }
        }
      },
      "APIResponseBoolean": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "boolean"
          }
        }
      },
      "MetricTemplate": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Template ID"
          },
          "name": {
            "type": "string",
            "description": "Template name"
          },
          "description": {
            "type": "string",
            "description": "Template description"
          },
          "metric_name": {
            "type": "string",
            "description": "Metric name"
          },
          "datasource_type": {
            "type": "string",
            "enum": ["Zabbix", "Aliyun", "Volcengine"],
            "description": "Data source type"
          },
          "threshold_config": {
            "type": "object",
            "description": "Threshold configuration",
            "properties": {
              "upper_bound": {
                "type": "number",
                "description": "Upper bound threshold"
              },
              "lower_bound": {
                "type": "number",
                "description": "Lower bound threshold"
              },
              "algorithm": {
                "type": "string",
                "enum": ["static", "dynamic", "ml"],
                "description": "Threshold algorithm"
              },
              "sensitivity": {
                "type": "number",
                "minimum": 0,
                "maximum": 1,
                "description": "Sensitivity"
              }
            }
          },
          "is_active": {
            "type": "boolean",
            "default": true,
            "description": "Whether active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Update time"
          }
        },
        "required": [
          "name",
          "metric_name",
          "datasource_type",
          "threshold_config"
        ]
      },
      "MetricTemplateCreateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Template name"
          },
          "description": {
            "type": "string",
            "description": "Template description"
          },
          "metric_name": {
            "type": "string",
            "description": "Metric name"
          },
          "datasource_type": {
            "type": "string",
            "enum": ["Zabbix", "Aliyun", "Volcengine"],
            "description": "Data source type"
          },
          "threshold_config": {
            "type": "object",
            "description": "Threshold configuration"
          }
        },
        "required": [
          "name",
          "metric_name",
          "datasource_type",
          "threshold_config"
        ]
      },
      "MetricTemplateUpdateRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Template name"
          },
          "description": {
            "type": "string",
            "description": "Template description"
          },
          "threshold_config": {
            "type": "object",
            "description": "Threshold configuration"
          },
          "is_active": {
            "type": "boolean",
            "description": "Whether active"
          }
        }
      },
      "APIResponseMetricTemplate": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/MetricTemplate"
          }
        }
      },
      "PaginatedAPIResponseMetricTemplateList": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricTemplate"
            }
          },
          "limit": {
            "type": "integer"
          },
          "skip": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          }
        }
      },
      "IntelligentThresholdTask": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Task ID"
          },
          "task_name": {
            "type": "string",
            "description": "Task name"
          },
          "description": {
            "type": "string",
            "description": "Task description"
          },
          "template_id": {
            "type": "string",
            "description": "Associated template ID"
          },
          "datasource_id": {
            "type": "string",
            "description": "Data source ID"
          },
          "datasource_type": {
            "type": "string",
            "enum": ["Zabbix", "Aliyun", "Volcengine"],
            "description": "Data source type"
          },
          "projects": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of projects"
          },
          "auto_update": {
            "type": "boolean",
            "description": "Whether auto update"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "running", "completed", "failed", "cancelled"],
            "description": "Task status"
          },
          "config": {
            "type": "object",
            "description": "Task configuration",
            "properties": {
              "schedule": {
                "type": "string",
                "description": "Schedule expression (cron)"
              },
              "timeout": {
                "type": "integer",
                "description": "Timeout in seconds"
              },
              "retry_count": {
                "type": "integer",
                "description": "Retry count"
              }
            }
          },
          "last_execution_time": {
            "type": "string",
            "format": "date-time",
            "description": "Last execution time"
          },
          "next_execution_time": {
            "type": "string",
            "format": "date-time",
            "description": "Next execution time"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Update time"
          }
        },
        "required": ["task_name", "template_id", "datasource_id"]
      },
      "IntelligentThresholdTaskVersion": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Version ID"
          },
          "task_id": {
            "type": "string",
            "description": "Task ID"
          },
          "metric_template_value": {
            "$ref": "#/components/schemas/MetricTemplateValue"
          },
          "n_count": {
            "type": "integer",
            "description": "N count"
          },
          "direction": {
            "type": "string",
            "enum": ["up", "down", "both"],
            "description": "Threshold calculation direction"
          },
          "status": {
            "type": "string",
            "enum": [
              "Unknown",
              "Launching",
              "Running",
              "Stopped",
              "Success",
              "Failed"
            ],
            "description": "Task status"
          },
          "version": {
            "type": "integer",
            "description": "Version number"
          },
          "result": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricThresholdResult"
            },
            "description": "Threshold result"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Update time"
          },
          "error_message": {
            "type": "string",
            "description": "Error message (if task failed)"
          }
        },
        "required": [
          "task_id",
          "metric_template_value",
          "n_count",
          "direction",
          "status",
          "version"
        ]
      },
      "IntelligentThresholdTaskDetail": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Task ID"
          },
          "task_name": {
            "type": "string",
            "description": "Task name"
          },
          "template_id": {
            "type": "string",
            "description": "Associated template ID"
          },
          "datasource_id": {
            "type": "string",
            "description": "Data source ID"
          },
          "datasource_type": {
            "type": "string",
            "enum": ["Zabbix", "Aliyun", "Volcengine"],
            "description": "Data source type"
          },
          "auto_update": {
            "type": "boolean",
            "description": "Auto update switch"
          },
          "projects": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of project names"
          },
          "products": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of product names"
          },
          "customers": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of customer names"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Update time"
          },
          "latest_version": {
            "$ref": "#/components/schemas/IntelligentThresholdTaskVersion"
          }
        },
        "required": [
          "task_name",
          "template_id",
          "datasource_id",
          "datasource_type"
        ]
      },
      "MetricThresholdResult": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Metric name"
          },
          "unique_key": {
            "type": "string",
            "description": "Unique identifier"
          },
          "thresholds": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IntelligentThresholdConfig"
            },
            "description": "List of threshold configurations"
          },
          "labels": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Labels"
          },
          "status": {
            "type": "string",
            "description": "Status (Success or Failed)"
          },
          "error_message": {
            "type": "string",
            "description": "Error message (if status is Failed)"
          }
        },
        "required": ["name", "unique_key", "thresholds", "labels"]
      },
      "IntelligentThresholdConfig": {
        "type": "object",
        "properties": {
          "start_hour": {
            "type": "integer",
            "description": "Start hour"
          },
          "end_hour": {
            "type": "integer",
            "description": "End hour"
          },
          "upper_bound": {
            "type": "number",
            "nullable": true,
            "description": "Upper bound"
          },
          "lower_bound": {
            "type": "number",
            "nullable": true,
            "description": "Lower bound"
          },
          "window_size": {
            "type": "integer",
            "description": "Window size"
          }
        },
        "required": ["start_hour", "end_hour", "window_size"]
      },
      "IntelligentThresholdTaskCreateRequest": {
        "type": "object",
        "properties": {
          "task_name": {
            "type": "string",
            "description": "Task name"
          },
          "datasource_id": {
            "type": "string",
            "description": "Data source ID"
          },
          "datasource_type": {
            "type": "string",
            "enum": ["Zabbix", "Aliyun", "Volcengine"],
            "description": "Data source type"
          },
          "auto_update": {
            "type": "boolean",
            "description": "Auto update switch"
          },
          "projects": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of project names"
          },
          "products": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of product names"
          },
          "customers": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of customer names"
          },
          "direction": {
            "type": "string",
            "enum": ["up", "down", "both"],
            "description": "Threshold calculation direction"
          },
          "metric_template_value": {
            "$ref": "#/components/schemas/MetricTemplateValue"
          },
          "n_count": {
            "type": "integer",
            "description": "N count"
          }
        },
        "required": [
          "task_name",
          "datasource_id",
          "datasource_type",
          "direction",
          "metric_template_value",
          "n_count"
        ]
      },
      "RerunIntelligentThresholdTaskRequest": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Task ID"
          },
          "metric_template_value": {
            "$ref": "#/components/schemas/MetricTemplateValue"
          },
          "n_count": {
            "type": "integer",
            "description": "N count"
          },
          "direction": {
            "type": "string",
            "enum": ["up", "down", "both"],
            "description": "Threshold calculation direction"
          }
        },
        "required": ["task_id", "metric_template_value", "n_count", "direction"]
      },
      "ListIntelligentThresholdTaskRequest": {
        "type": "object",
        "properties": {
          "projects": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of project names"
          },
          "task_name": {
            "type": "string",
            "description": "Task name filter"
          },
          "datasource_type": {
            "type": "string",
            "enum": ["Zabbix", "Aliyun", "Volcengine"],
            "default": "Volcengine",
            "description": "Data source type"
          },
          "auto_update": {
            "type": "boolean",
            "description": "Auto update switch"
          },
          "created_at_start": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time range start"
          },
          "created_at_end": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time range end"
          },
          "updated_at_start": {
            "type": "string",
            "format": "date-time",
            "description": "Update time range start"
          },
          "updated_at_end": {
            "type": "string",
            "format": "date-time",
            "description": "Update time range end"
          },
          "skip": {
            "type": "integer",
            "minimum": 0,
            "default": 0,
            "description": "Number of records to skip"
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "maximum": 1000,
            "default": 100,
            "description": "Page size"
          }
        }
      },
      "ListIntelligentThresholdTaskVersionRequest": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Task ID"
          },
          "statuses": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "launching",
                "running",
                "completed",
                "failed",
                "cancelled"
              ]
            },
            "description": "List of task statuses"
          },
          "create_time_range": {
            "$ref": "#/components/schemas/TimeRange"
          },
          "update_time_range": {
            "$ref": "#/components/schemas/TimeRange"
          },
          "page_req": {
            "$ref": "#/components/schemas/PaginationRequest"
          },
          "sort_columns": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SortColumn"
            },
            "description": "Sort columns"
          }
        },
        "required": ["task_id", "page_req"]
      },
      "UpdateTaskResultRequest": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Task ID"
          },
          "task_version": {
            "type": "integer",
            "description": "Task version"
          },
          "status": {
            "type": "string",
            "enum": [
              "Unknown",
              "Launching",
              "Running",
              "Stopped",
              "Success",
              "Failed"
            ],
            "description": "Task status"
          },
          "results": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MetricThresholdResult"
            },
            "description": "Algorithm result"
          }
        },
        "required": ["task_id", "task_version", "status"]
      },
      "UpdateAutoRefreshSwitchPayload": {
        "type": "object",
        "properties": {
          "task_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of task IDs"
          },
          "auto_update": {
            "type": "boolean",
            "description": "Auto update switch value"
          }
        },
        "required": ["task_ids", "auto_update"]
      },
      "PaginationRequest": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "minimum": 1,
            "default": 1,
            "description": "Page number"
          },
          "page_size": {
            "type": "integer",
            "minimum": 1,
            "maximum": 1000,
            "default": 20,
            "description": "Page size"
          }
        },
        "required": ["page", "page_size"]
      },
      "SortColumn": {
        "type": "object",
        "properties": {
          "column": {
            "type": "string",
            "description": "Sort field"
          },
          "desc": {
            "type": "boolean",
            "description": "Whether descending sort"
          }
        },
        "required": ["column", "desc"]
      },
      "TimeRange": {
        "type": "object",
        "properties": {
          "start_time": {
            "type": "string",
            "format": "date-time",
            "description": "Start time"
          },
          "end_time": {
            "type": "string",
            "format": "date-time",
            "description": "End time"
          }
        },
        "required": ["start_time", "end_time"]
      },
      "APIResponseIntelligentThresholdTask": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/IntelligentThresholdTask"
          }
        }
      },
      "IntelligentThresholdAlarm": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "Alarm ID"
          },
          "task_id": {
            "type": "string",
            "description": "Associated task ID"
          },
          "alarm_type": {
            "type": "string",
            "enum": ["threshold_breach", "anomaly_detected", "system_error"],
            "description": "Alarm type"
          },
          "severity": {
            "type": "string",
            "enum": ["INFO", "WARNING", "ERROR", "CRITICAL"],
            "description": "Alarm level"
          },
          "title": {
            "type": "string",
            "description": "Alarm title"
          },
          "message": {
            "type": "string",
            "description": "Alarm message"
          },
          "metric_value": {
            "type": "number",
            "description": "Metric value that triggered the alarm"
          },
          "threshold_value": {
            "type": "number",
            "description": "Threshold"
          },
          "status": {
            "type": "string",
            "enum": ["active", "resolved", "suppressed"],
            "description": "Alarm status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time"
          },
          "resolved_at": {
            "type": "string",
            "format": "date-time",
            "description": "Resolution time"
          }
        },
        "required": ["task_id", "alarm_type", "severity", "title", "message"]
      },
      "IntelligentThresholdAlarmCreateRequest": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Associated task ID"
          },
          "alarm_type": {
            "type": "string",
            "enum": ["threshold_breach", "anomaly_detected", "system_error"],
            "description": "Alarm type"
          },
          "severity": {
            "type": "string",
            "enum": ["INFO", "WARNING", "ERROR", "CRITICAL"],
            "description": "Alarm level"
          },
          "title": {
            "type": "string",
            "description": "Alarm title"
          },
          "message": {
            "type": "string",
            "description": "Alarm message"
          },
          "metric_value": {
            "type": "number",
            "description": "Metric value that triggered the alarm"
          },
          "threshold_value": {
            "type": "number",
            "description": "Threshold"
          }
        },
        "required": ["task_id", "alarm_type", "severity", "title", "message"]
      },
      "APIResponseIntelligentThresholdAlarm": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/IntelligentThresholdAlarm"
          }
        }
      },
      "APIResponseIntelligentThresholdTaskDetail": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/IntelligentThresholdTaskDetail"
          }
        }
      },
      "APIResponseIntelligentThresholdTaskVersion": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/IntelligentThresholdTaskVersion"
          }
        }
      },
      "PaginatedAPIResponseIntelligentThresholdTask": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IntelligentThresholdTask"
            }
          },
          "limit": {
            "type": "integer",
            "description": "Page size"
          },
          "skip": {
            "type": "integer",
            "description": "Number of records to skip"
          },
          "total": {
            "type": "integer",
            "description": "Total number of records"
          }
        }
      },
      "PaginatedAPIResponseIntelligentThresholdTaskVersion": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IntelligentThresholdTaskVersion"
            }
          },
          "limit": {
            "type": "integer",
            "description": "Page size"
          },
          "skip": {
            "type": "integer",
            "description": "Number of records to skip"
          },
          "total": {
            "type": "integer",
            "description": "Total number of records"
          }
        }
      },
      "SyncAlarmRulesPayload": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Intelligent threshold task ID"
          },
          "task_version_id": {
            "type": "string",
            "description": "Intelligent threshold task version ID"
          },
          "contact_group_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of contact group IDs (required for Volcengine and Aliyun)"
          },
          "alert_methods": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["Email", "Phone", "SMS"]
            },
            "description": "Alarm notification methods (only valid for Volcengine)"
          },
          "mediatype_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of media type IDs (only required for Zabbix, corresponds to Zabbix alarm notification methods)"
          },
          "usergroup_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of user group IDs (only required for Zabbix, corresponds to Zabbix alarm groups)"
          },
          "webhook": {
            "type": "string",
            "description": "Webhook URL (optional)"
          },
          "alarm_level": {
            "type": "string",
            "enum": ["P0", "P1", "P2"],
            "default": "P2",
            "description": "Alarm level (valid for all alarm sources)"
          },
          "max_workers": {
            "type": "integer",
            "default": 1,
            "description": "Maximum number of concurrent worker threads"
          },
          "rate_limit_period": {
            "type": "number",
            "default": 1.0,
            "description": "Rate limit period in seconds"
          },
          "rate_limit_count": {
            "type": "integer",
            "default": 5,
            "description": "Maximum number of requests per period"
          }
        },
        "required": ["task_id", "task_version_id", "alarm_level"]
      },
      "SyncAlarmRulesResponse": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "Total number of rules processed"
          },
          "created": {
            "type": "integer",
            "description": "Number of rules created"
          },
          "updated": {
            "type": "integer",
            "description": "Number of rules updated"
          },
          "deleted": {
            "type": "integer",
            "description": "Number of rules deleted"
          },
          "failed": {
            "type": "integer",
            "description": "Number of rules failed"
          },
          "created_rule_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of created rule IDs"
          },
          "updated_rule_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of updated rule IDs"
          },
          "deleted_rule_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of deleted rule IDs"
          },
          "rule_operations": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "List of rule operations"
          }
        },
        "required": ["total", "created", "updated", "deleted", "failed"]
      },
      "IntelligentThresholdTaskStatus": {
        "type": "string",
        "enum": ["Launching", "Running", "Stopped", "Success", "Failed"],
        "description": "Intelligent threshold task status"
      },
      "APIResponseSyncAlarmRulesResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/SyncAlarmRulesResponse"
          }
        }
      },
      "ZabbixMediatype": {
        "type": "object",
        "properties": {
          "media_type_id": {
            "type": "string",
            "description": "Zabbix media type ID"
          },
          "name": {
            "type": "string",
            "description": "Media type name"
          },
          "media_type": {
            "type": "string",
            "description": "Media type"
          }
        },
        "required": ["media_type_id", "name", "media_type"]
      },
      "ZabbixUserGroup": {
        "type": "object",
        "properties": {
          "usrgrpid": {
            "type": "string",
            "description": "Zabbix user group ID"
          },
          "name": {
            "type": "string",
            "description": "User group name"
          },
          "gui_access": {
            "type": "string",
            "description": "GUI access level"
          },
          "users_status": {
            "type": "string",
            "description": "User status"
          },
          "debug_mode": {
            "type": "string",
            "description": "Debug mode"
          }
        },
        "required": [
          "usrgrpid",
          "name",
          "gui_access",
          "users_status",
          "debug_mode"
        ]
      },
      "APIResponseZabbixMediatypeList": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ZabbixMediatype"
            }
          }
        }
      },
      "APIResponseZabbixUserGroupList": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ZabbixUserGroup"
            }
          }
        }
      }
    }
  }
}
