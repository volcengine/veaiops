{
  "openapi": "3.0.0",
  "info": {
    "title": "VolcAIOpsKit API",
    "version": "1.0.0",
    "description": "VolcAIOpsKit API documentation"
  },
  "servers": [
    {
      "url": "/",
      "description": "Development server"
    }
  ],
  "modules": [
    {
      "name": "Authentication",
      "file": "modules/auth.json"
    },
    {
      "name": "Bot Attributes",
      "file": "modules/bot-attributes.json"
    },
    {
      "name": "Bots",
      "file": "modules/bots.json"
    },
    {
      "name": "Chats",
      "file": "modules/chats.json"
    },
    {
      "name": "Common",
      "file": "modules/common.json"
    },
    {
      "name": "Customers",
      "file": "modules/customers.json"
    },
    {
      "name": "Data Source",
      "file": "modules/datasource.json"
    },
    {
      "name": "Event Center",
      "file": "modules/event-center.json"
    },
    {
      "name": "Global Config",
      "file": "modules/global-config.json"
    },
    {
      "name": "Intelligent Threshold",
      "file": "modules/intelligent-threshold.json"
    },
    {
      "name": "Metric Template",
      "file": "modules/metric-template.json"
    },
    {
      "name": "Oncall",
      "file": "modules/oncall.json"
    },
    {
      "name": "Products",
      "file": "modules/products.json"
    },
    {
      "name": "Projects",
      "file": "modules/projects.json"
    },
    {
      "name": "Statistics",
      "file": "modules/statistics.json"
    },
    {
      "name": "System Config",
      "file": "modules/system-config.json"
    },
    {
      "name": "Users",
      "file": "modules/users.json"
    },
    {
      "name": "Webhook",
      "file": "modules/webhook.json"
    }
  ],
  "validation": {
    "strict_mode": false,
    "check_duplicates": true
  },
  "components": {
    "schemas": {
      "APIResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "Response status code"
          },
          "message": {
            "type": "string",
            "description": "Response message"
          },
          "data": {
            "description": "Response data"
          }
        },
        "required": ["code", "message"]
      },
      "APIResponseBoolean": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "type": "boolean"
          }
        }
      },
      "PaginationParams": {
        "type": "object",
        "properties": {
          "skip": {
            "type": "integer",
            "default": 0,
            "description": "Number of records to skip"
          },
          "limit": {
            "type": "integer",
            "default": 100,
            "description": "Maximum number of records to return"
          }
        }
      },
      "PaginatedAPIResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "Response status code"
          },
          "message": {
            "type": "string",
            "description": "Response message"
          },
          "data": {
            "description": "Response data"
          },
          "limit": {
            "type": "integer",
            "description": "Maximum number of records to return"
          },
          "skip": {
            "type": "integer",
            "description": "Number of records to skip"
          },
          "total": {
            "type": "integer",
            "description": "Total number of records"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["username", "password"],
        "properties": {
          "username": {
            "type": "string",
            "description": "Username"
          },
          "password": {
            "type": "string",
            "description": "Password"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "access_token": {
            "type": "string",
            "description": "Access token"
          },
          "token_type": {
            "type": "string",
            "description": "Token type"
          },
          "expires_in": {
            "type": "integer",
            "description": "Expiration time in seconds"
          }
        }
      },
      "DataSource": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Data source ID"
          },
          "name": {
            "type": "string",
            "description": "Data source name"
          },
          "type": {
            "type": "string",
            "enum": ["zabbix", "aliyun", "volcengine"],
            "description": "Data source type"
          },
          "config": {
            "type": "object",
            "description": "Data source configuration"
          },
          "description": {
            "type": "string",
            "description": "Data source description"
          },
          "is_active": {
            "type": "boolean",
            "default": true,
            "description": "Whether the data source is active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Update time"
          }
        },
        "required": ["name", "type", "config"]
      },
      "ZabbixDataSource": {
        "allOf": [
          {
            "$ref": "#/components/schemas/DataSource"
          },
          {
            "type": "object",
            "properties": {
              "config": {
                "type": "object",
                "properties": {
                  "url": {
                    "type": "string",
                    "description": "Zabbix server URL"
                  },
                  "username": {
                    "type": "string",
                    "description": "Username"
                  },
                  "password": {
                    "type": "string",
                    "description": "Password"
                  },
                  "timeout": {
                    "type": "integer",
                    "default": 30,
                    "description": "Timeout in seconds"
                  }
                },
                "required": ["url", "username", "password"]
              }
            }
          }
        ]
      },
      "AliyunDataSource": {
        "allOf": [
          {
            "$ref": "#/components/schemas/DataSource"
          },
          {
            "type": "object",
            "properties": {
              "config": {
                "type": "object",
                "properties": {
                  "access_key_id": {
                    "type": "string",
                    "description": "Alibaba Cloud AccessKey ID"
                  },
                  "access_key_secret": {
                    "type": "string",
                    "description": "Alibaba Cloud AccessKey Secret"
                  },
                  "region": {
                    "type": "string",
                    "description": "Alibaba Cloud region"
                  },
                  "endpoint": {
                    "type": "string",
                    "description": "Service endpoint"
                  }
                },
                "required": ["region"]
              }
            }
          }
        ]
      },
      "VolcengineDataSource": {
        "allOf": [
          {
            "$ref": "#/components/schemas/DataSource"
          },
          {
            "type": "object",
            "properties": {
              "config": {
                "type": "object",
                "properties": {
                  "access_key": {
                    "type": "string",
                    "description": "Volcano Engine AccessKey"
                  },
                  "secret_key": {
                    "type": "string",
                    "description": "Volcano Engine SecretKey"
                  },
                  "region": {
                    "type": "string",
                    "description": "Volcano Engine region"
                  },
                  "endpoint": {
                    "type": "string",
                    "description": "Service endpoint"
                  }
                },
                "required": ["region"]
              }
            }
          }
        ]
      },
      "CreateDataSourceRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Data source name"
          },
          "type": {
            "type": "string",
            "enum": ["zabbix", "aliyun", "volcengine"],
            "description": "Data source type"
          },
          "config": {
            "type": "object",
            "description": "Data source configuration"
          },
          "description": {
            "type": "string",
            "description": "Data source description"
          },
          "is_active": {
            "type": "boolean",
            "default": true,
            "description": "Whether the data source is active"
          }
        },
        "required": ["name", "type", "config"]
      },
      "UpdateDataSourceRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Data source name"
          },
          "config": {
            "type": "object",
            "description": "Data source configuration"
          },
          "description": {
            "type": "string",
            "description": "Data source description"
          },
          "is_active": {
            "type": "boolean",
            "description": "Whether the data source is active"
          }
        }
      },
      "APIResponseDataSource": {
        "allOf": [
          {
            "$ref": "#/components/schemas/APIResponse"
          },
          {
            "type": "object",
            "properties": {
              "data": {
                "$ref": "#/components/schemas/DataSource"
              }
            }
          }
        ]
      },
      "APIResponseDataSourceList": {
        "allOf": [
          {
            "$ref": "#/components/schemas/PaginatedAPIResponse"
          },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/DataSource"
                }
              }
            }
          }
        ]
      }
    }
  }
}
